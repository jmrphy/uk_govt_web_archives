xlab=c("2007", "f", "2008", "f", "2009"),
main="Real Wages and UK Gov't Web Mentions of \"Wage\" (Standardized)") + theme_bw()
qplot(year, value, data=df, geom="line", colour=variable,
main="Real Wages and UK Gov't Web Mentions of \"Wage\" (Standardized)") + theme_bw()
qplot(year, value, data=df, geom="line", colour=variable,
main="Real Wages and UK Gov't Web Mentions of \"Wage\" (Standardized)") + theme_bw()
png("graphs/wage_responsiveness.png")
qplot(year, value, data=df, geom="line", colour=variable,
main="Real Wages and UK Gov't Web Mentions of \"Wage\" (Standardized)") + theme_bw()
dev.off()
png("graphs/wage_responsiveness.png")
qplot(year, value, data=df, geom="line", colour=variable,
main="Real Wages and UK Gov't Web Mentions of \"Wage\" (Standardized)") + theme_bw()
dev.off()
png("graphs/wage_responsiveness.png")
qplot(year, value, data=df, geom="line", colour=variable,
main="Real Wages and UK Gov't Web Mentions of \"Wage\" (Standardized)") + theme_bw()
dev.off()
png("graphs/wage_responsiveness.png")
qplot(year, value, data=df, geom="line", colour=variable,
main="Real Wages and UK Gov't Web Mentions of \"Wage\" (Standardized)") + theme_bw()
dev.off()
qplot(year, value, data=df, geom="line", colour=variable,
main="Real Wages and UKGWA Mentions of \"Wage\" (Standardized)") + theme_bw()
dev.off()
png("graphs/wage_responsiveness.png")
qplot(year, value, data=df, geom="line", colour=variable,
main="Real Wages and UKGWA Mentions of \"Wage\" (Standardized)") + theme_bw()
dev.off()
qplot(year, value, data=df, geom="line", colour=variable,
main="Real Wages and UKGWA Mentions of \"Wage\") + theme_bw()
dev.off()
png("graphs/wage_responsiveness.png")
qplot(year, value, data=df, geom="line", colour=variable,
main="Real Wages and UKGWA Mentions of \"Wage\") + theme_bw()
dev.off()
png("graphs/wage_responsiveness.png")
qplot(year, value, data=df, geom="line", colour=variable,
main="Real Wages and UKGWA Mentions of \"Wage\"") + theme_bw()
dev.off()
qplot(year, value, data=df, geom="line", colour=variable,
main="Real Wages and UKGWA Mentions of \"Wage\"") + theme_bw()
png("graphs/wage_responsiveness.png")
qplot(year, value, data=df, geom="line", colour=variable,
main="Real Wages and UKGWA Mentions of \"Wage\"") + theme_bw()
dev.off()
require(XML)
require(lubridate)
require(quandl)
require(arm)
### Load lists of results saved from /scrape
load("data/api/api_Unemployment.Rdata")
require(XML)
require(lubridate)
require(Quandl)
require(arm)
### Load lists of results saved from /scrape
load("data/api/api_Unemployment.Rdata")
Unemploymentdata<-lapply(DF.Unemployment, function(x) try(xmlParse(x)))
### Extract the timestamps
Unemploymentdates <- lapply(Unemploymentdata, function(x) try(xpathSApply(x,'//item/nutch:date',xmlValue)))
### Make time-series
Unemploymentdf<-as.data.frame(unlist(Unemploymentdates))
names(Unemploymentdf)<-c("timestamp")
Unemploymentdf$year<-substr(Unemploymentdf$timestamp, start=1, stop=4)
Unemploymenttimeseries<-as.data.frame(table(Unemploymentdf$year))
Unemploymenttimeseries$Year<-as.Date(as.character(Unemploymenttimeseries$Var1), "%Y")
Unemploymenttimeseries$year<-year(Unemploymenttimeseries$Year)
Unemploymenttimeseries$Term<-"Unemployment"
Unemploymenttimeseries<-Unemploymenttimeseries[2:8,]
realunemployment<-read.csv('http://www.quandl.com/api/v1/datasets/UKONS/LMS_MGSX_M.csv?&trim_start=1971-02-28&trim_end=2013-11-30&sort_order=desc', colClasses=c('Year'='Date'))
realunemployment$year<-year(realunemployment$Year)
df<-merge(Unemploymenttimeseries, realunemployment, by="year")
df$FrequencyIndex<-rescale(df$Freq)
df$RealUnemploymentIndex<-rescale(df$Value)
df<-df[,c("year", "FrequencyIndex", "RealUnemploymentIndex")]
df<-melt(df, id="year")
#df$year<-as.Date(as.character(df$year), "%Y")
#df$year<-substr(df$year, start=1, stop=4)
#df$year<-year(df$year)
png("graphs/Unemployment_responsiveness.png")
qplot(year, value, data=df, geom="line", colour=variable,
main="Real unemployment and UKGWA Mentions of \"Unemployment\"") + theme_bw()
dev.off()
Unemploymentdata<-lapply(DF.unemployment, function(x) try(xmlParse(x)))
Unemploymentdates <- lapply(Unemploymentdata, function(x) try(xpathSApply(x,'//item/nutch:date',xmlValue)))
Unemploymentdf<-as.data.frame(unlist(Unemploymentdates))
names(Unemploymentdf)<-c("timestamp")
Unemploymentdf$year<-substr(Unemploymentdf$timestamp, start=1, stop=4)
Unemploymenttimeseries<-as.data.frame(table(Unemploymentdf$year))
Unemploymenttimeseries$Year<-as.Date(as.character(Unemploymenttimeseries$Var1), "%Y")
Unemploymenttimeseries$year<-year(Unemploymenttimeseries$Year)
Unemploymenttimeseries$Term<-"Unemployment"
Unemploymenttimeseries<-Unemploymenttimeseries[2:8,]
realunemployment<-read.csv('http://www.quandl.com/api/v1/datasets/UKONS/LMS_MGSX_M.csv?&trim_start=1971-02-28&trim_end=2013-11-30&sort_order=desc', colClasses=c('Year'='Date'))
realunemployment$year<-year(realunemployment$Year)
df<-merge(Unemploymenttimeseries, realunemployment, by="year")
df$FrequencyIndex<-rescale(df$Freq)
df$RealUnemploymentIndex<-rescale(df$Value)
df<-df[,c("year", "FrequencyIndex", "RealUnemploymentIndex")]
df<-melt(df, id="year")
#df$year<-as.Date(as.character(df$year), "%Y")
#df$year<-substr(df$year, start=1, stop=4)
#df$year<-year(df$year)
png("graphs/Unemployment_responsiveness.png")
qplot(year, value, data=df, geom="line", colour=variable,
main="Real unemployment and UKGWA Mentions of \"Unemployment\"") + theme_bw()
dev.off()
qplot(year, value, data=df, geom="line", colour=variable,
main="Real unemployment and UKGWA Mentions of \"Unemployment\"") + theme_bw()
View(df)
Unemploymentdf<-as.data.frame(unlist(Unemploymentdates))
View(Unemploymentdf)
names(Unemploymentdf)<-c("timestamp")
Unemploymentdf$year<-substr(Unemploymentdf$timestamp, start=1, stop=4)
View(Unemploymentdf)
Unemploymenttimeseries<-as.data.frame(table(Unemploymentdf$year))
View(Unemploymenttimeseries)
View(Unemploymenttimeseries)
Unemploymenttimeseries$Year<-as.Date(as.character(Unemploymenttimeseries$Var1), "%Y")
View(Unemploymenttimeseries)
Unemploymenttimeseries$year<-year(Unemploymenttimeseries$Year)
View(Unemploymenttimeseries)
Unemploymenttimeseries$Term<-"Unemployment"
View(Unemploymenttimeseries)
realunemployment<-read.csv('http://www.quandl.com/api/v1/datasets/UKONS/LMS_MGSX_M.csv?&trim_start=1971-02-28&trim_end=2013-11-30&sort_order=desc', colClasses=c('Year'='Date'))
realunemployment$year<-year(realunemployment$Year)
df<-merge(Unemploymenttimeseries, realunemployment, by="year")
View(df)
View(realunemployment)
realunemployment$year<-substr(realunemployment$year, start=1, stop=4)
View(realunemployment)
View(realunemployment)
?aggregate
realunemployment<-aggregate(realunemployment, by="year")
realunemployment<-aggregate(realunemployment, by="year", mean)
realunemployment<-aggregate(realunemployment, by=list(year), mean)
aggregate(realunemployment, by=list(year), mean)
realunemployment<-aggregate(realunemployment, by=list(realunemployment$year), mean)
View(realunemployment)
realunemployment$year<-realunemployment$Group.1
View(realunemployment)
df<-merge(Unemploymenttimeseries, realunemployment, by="year")
df$FrequencyIndex<-rescale(df$Freq)
df$RealUnemploymentIndex<-rescale(df$Value)
df<-df[,c("year", "FrequencyIndex", "RealUnemploymentIndex")]
df<-melt(df, id="year")
qplot(year, value, data=df, geom="line", colour=variable,
main="Real unemployment and UKGWA Mentions of \"Unemployment\"") + theme_bw()
png("graphs/unemployment_responsiveness.png")
qplot(year, value, data=df, geom="line", colour=variable,
main="Real unemployment and UKGWA Mentions of \"Unemployment\"") + theme_bw()
dev.off()
?png
png("graphs/unemployment_responsiveness.png", width = 600, height = 480,)
qplot(year, value, data=df, geom="line", colour=variable,
main="Real unemployment and UKGWA Mentions of \"Unemployment\"") + theme_bw()
dev.off()
### Load required packages
require(XML)
require(lubridate)
require(Quandl)
require(reshape)
require(arm)
### Load lists of results saved from /scrape
load("data/api/api_Unemployment.Rdata")
### Parse the lists of XML docs
Unemploymentdata<-lapply(DF.unemployment, function(x) try(xmlParse(x)))
### Extract the timestamps
Unemploymentdates <- lapply(Unemploymentdata, function(x) try(xpathSApply(x,'//item/nutch:date',xmlValue)))
### Make time-series
Unemploymentdf<-as.data.frame(unlist(Unemploymentdates))
names(Unemploymentdf)<-c("timestamp")
Unemploymentdf$year<-substr(Unemploymentdf$timestamp, start=1, stop=4)
Unemploymenttimeseries<-as.data.frame(table(Unemploymentdf$year))
Unemploymenttimeseries$Year<-as.Date(as.character(Unemploymenttimeseries$Var1), "%Y")
Unemploymenttimeseries$year<-year(Unemploymenttimeseries$Year)
Unemploymenttimeseries$Term<-"Unemployment"
realunemployment<-read.csv('http://www.quandl.com/api/v1/datasets/UKONS/LMS_MGSX_M.csv?&trim_start=1971-02-28&trim_end=2013-11-30&sort_order=desc', colClasses=c('Year'='Date'))
realunemployment$year<-year(realunemployment$Year)
realunemployment$year<-substr(realunemployment$year, start=1, stop=4)
realunemployment<-aggregate(realunemployment, by=list(realunemployment$year), mean)
realunemployment$year<-realunemployment$Group.1
df<-merge(Unemploymenttimeseries, realunemployment, by="year")
df$FrequencyIndex<-rescale(df$Freq)
df$RealUnemploymentIndex<-rescale(df$Value)
df<-df[,c("year", "FrequencyIndex", "RealUnemploymentIndex")]
df<-melt(df, id="year")
#df$year<-as.Date(as.character(df$year), "%Y")
#df$year<-substr(df$year, start=1, stop=4)
#df$year<-year(df$year)
png("graphs/unemployment_responsiveness.png", width = 600, height = 480)
qplot(year, value, data=df, geom="line", colour=variable,
main="Real unemployment and UKGWA Mentions of \"Unemployment\"") + theme_bw()
dev.off()
### Load lists of results saved from /scrape
load("data/api/api_wage.Rdata")
load("data/api/api_profit.Rdata")
load("data/api/api_unemployment.Rdata")
load("data/api/api_inflation.Rdata")
load("data/api/api_inequality.Rdata")
### Parse the lists of XML docs
wagedata<-lapply(DF.wage, function(x) try(xmlParse(x)))
profitdata<-lapply(DF.profit, function(x) try(xmlParse(x)))
unemploymentdata<-lapply(DF.unemployment, function(x) try(xmlParse(x)))
inflationdata<-lapply(DF.inflation, function(x) try(xmlParse(x)))
inequalitydata<-lapply(DF.unemployment, function(x) try(xmlParse(x)))
### Extract the timestamps
wagedates <- lapply(wagedata, function(x) try(xpathSApply(x,'//item/nutch:date',xmlValue)))
profitdates <- lapply(profitdata, function(x) try(xpathSApply(x,'//item/nutch:date',xmlValue)))
unemploymentdates <- lapply(unemploymentdata, function(x) try(xpathSApply(x,'//item/nutch:date',xmlValue)))
inflationdates <- lapply(inflationdata, function(x) try(xpathSApply(x,'//item/nutch:date',xmlValue)))
inequalitydates <- lapply(inequalitydata, function(x) try(xpathSApply(x,'//item/nutch:date',xmlValue)))
#titles <- lapply(data, function(x) xpathSApply(x,'//item/title',xmlValue))
#descriptions <- lapply(data, function(x) xpathSApply(x,'//item/description',xmlValue))
#contents <- lapply(data, function(x) xpathSApply(x,'//item/nutch:content',xmlValue))
#dates <- lapply(data, function(x) xpathSApply(x,'//item/nutch:date',xmlValue))
### Make time-series
require(lubridate)
wagedf<-as.data.frame(unlist(wagedates))
names(wagedf)<-c("timestamp")
wagedf$year<-substr(wagedf$timestamp, start=1, stop=4)
wagetimeseries<-as.data.frame(table(wagedf$year))
wagetimeseries$Year<-as.Date(as.character(wagetimeseries$Var1), "%Y")
wagetimeseries$Year<-year(wagetimeseries$Year)
wagetimeseries$Term<-"Wage"
profitdf<-as.data.frame(unlist(profitdates))
names(profitdf)<-c("timestamp")
profitdf$year<-substr(profitdf$timestamp, start=1, stop=4)
profittimeseries<-as.data.frame(table(profitdf$year))
profittimeseries$Year<-as.Date(as.character(profittimeseries$Var1), "%Y")
profittimeseries$Year<-year(profittimeseries$Year)
profittimeseries$Term<-"Profit"
unemploymentdf<-as.data.frame(unlist(unemploymentdates))
names(unemploymentdf)<-c("timestamp")
unemploymentdf$year<-substr(unemploymentdf$timestamp, start=1, stop=4)
unemploymenttimeseries<-as.data.frame(table(unemploymentdf$year))
unemploymenttimeseries$Year<-as.Date(as.character(unemploymenttimeseries$Var1), "%Y")
unemploymenttimeseries$Year<-year(unemploymenttimeseries$Year)
unemploymenttimeseries$Term<-"Unemployment"
inflationdf<-as.data.frame(unlist(inflationdates))
names(inflationdf)<-c("timestamp")
inflationdf$year<-substr(inflationdf$timestamp, start=1, stop=4)
inflationtimeseries<-as.data.frame(table(inflationdf$year))
inflationtimeseries$Year<-as.Date(as.character(inflationtimeseries$Var1), "%Y")
inflationtimeseries$Year<-year(inflationtimeseries$Year)
inflationtimeseries$Term<-"Inflation"
inequalitydf<-as.data.frame(unlist(inequalitydates))
names(inequalitydf)<-c("timestamp")
inequalitydf$year<-substr(inequalitydf$timestamp, start=1, stop=4)
inequalitytimeseries<-as.data.frame(table(inequalitydf$year))
inequalitytimeseries$Year<-as.Date(as.character(inequalitytimeseries$Var1), "%Y")
inequalitytimeseries$Year<-year(inequalitytimeseries$Year)
inequalitytimeseries$Term<-"Inequality"
df<-rbind(wagetimeseries,profittimeseries,unemploymenttimeseries, inflationtimeseries,inequalitytimeseries)
### Graph
require(ggplot2)
png("graphs/term_comparison_graph.png", width = 600, height = 480)
qplot(Year, Freq, data=df, geom="line", colour=Term, main="Frequency of Economic Terms Across All UK Gov't Websites") + theme_bw()
dev.off()
### Load required packages
require(XML)
require(lubridate)
require(Quandl)
require(reshape)
require(arm)
### Load lists of results saved from /scrape
load("data/api/api_wage.Rdata")
### Parse the lists of XML docs
wagedata<-lapply(DF.wage, function(x) try(xmlParse(x)))
### Extract the timestamps
wagedates <- lapply(wagedata, function(x) try(xpathSApply(x,'//item/nutch:date',xmlValue)))
### Make time-series
wagedf<-as.data.frame(unlist(wagedates))
names(wagedf)<-c("timestamp")
wagedf$year<-substr(wagedf$timestamp, start=1, stop=4)
wagetimeseries<-as.data.frame(table(wagedf$year))
wagetimeseries$Year<-as.Date(as.character(wagetimeseries$Var1), "%Y")
wagetimeseries$year<-year(wagetimeseries$Year)
wagetimeseries$Term<-"Wage"
wagetimeseries<-wagetimeseries[2:8,]
realwages<-read.csv('http://www.quandl.com/api/v1/datasets/MWORTH/4_2.csv?&trim_start=1790-12-31&trim_end=2009-12-31&sort_order=desc', colClasses=c('Year'='Date'))
realwages$year<-year(realwages$Year)
df<-merge(wagetimeseries, realwages, by="year")
df$FrequencyIndex<-rescale(df$Freq)
df$RealWageIndex<-rescale(df$Value)
df<-df[,c("year", "FrequencyIndex", "RealWageIndex")]
df<-melt(df, id="year")
#df$year<-as.Date(as.character(df$year), "%Y")
#df$year<-substr(df$year, start=1, stop=4)
#df$year<-year(df$year)
png("graphs/wage_responsiveness.png", width = 600, height = 480)
qplot(year, value, data=df, geom="line", colour=variable,
main="Real Wages and UKGWA Mentions of \"Wage\"") + theme_bw()
dev.off()
load("data/api/api_inflation.Rdata")
inflationdata<-lapply(DF.inflation, function(x) try(xmlParse(x)))
inflationdates <- lapply(inflationdata, function(x) try(xpathSApply(x,'//item/nutch:date',xmlValue)))
inflationdf<-as.data.frame(unlist(inflationdates))
names(inflationdf)<-c("timestamp")
inflationdf$year<-substr(inflationdf$timestamp, start=1, stop=4)
inflationtimeseries<-as.data.frame(table(inflationdf$year))
inflationtimeseries$Year<-as.Date(as.character(inflationtimeseries$Var1), "%Y")
inflationtimeseries$year<-year(inflationtimeseries$Year)
inflationtimeseries$Term<-"inflation"
realinflation<-read.csv('http://www.quandl.com/api/v1/datasets/UKONS/LMS_MGSX_M.csv?&trim_start=1971-02-28&trim_end=2013-11-30&sort_order=desc', colClasses=c('Year'='Date'))
realinflation$year<-year(realinflation$Year)
realinflation$year<-substr(realinflation$year, start=1, stop=4)
View(realinflation)
realinflation<-aggregate(realinflation, by=list(realinflation$year), mean)
View(realinflation)
realinflation$year<-realinflation$Group.1
df<-merge(inflationtimeseries, realinflation, by="year")
df$FrequencyIndex<-rescale(df$Freq)
df$RealinflationIndex<-rescale(df$Value)
df<-df[,c("year", "FrequencyIndex", "RealinflationIndex")]
df<-melt(df, id="year")
qplot(year, value, data=df, geom="line", colour=variable,
main="Real inflation and UKGWA Mentions of \"inflation\"") + theme_bw()
realinflation<-read.csv('http://www.quandl.com/api/v1/datasets/UKONS/MM23_D7G7_M.csv?&trim_start=1989-01-31&trim_end=2014-01-31&collapse=annual&sort_order=desc', colClasses=c('Date'='Date'))
View(realinflation)
realinflation$year<-year(realinflation$Year)
realinflation$year<-substr(realinflation$year, start=1, stop=4)
realinflation$year<-substr(realinflation$year, start=1, stop=4)
View(realinflation)
realinflation$year<-year(realinflation$Date)
View(realinflation)
df<-merge(inflationtimeseries, realinflation, by="year")
df$FrequencyIndex<-rescale(df$Freq)
df$RealinflationIndex<-rescale(df$Value)
df<-df[,c("year", "FrequencyIndex", "RealinflationIndex")]
df<-melt(df, id="year")
qplot(year, value, data=df, geom="line", colour=variable,
main="Real inflation and UKGWA Mentions of \"inflation\"") + theme_bw()
View(realinflation)
View(df)
View(realinflation)
realinflation<-read.csv('http://www.quandl.com/api/v1/datasets/UKONS/LMS_MGSX_M.csv?&trim_start=1971-02-28&trim_end=2013-11-30&sort_order=desc', colClasses=c('Year'='Date'))
realinflation$year<-year(realinflation$Year)
realinflation$year<-substr(realinflation$year, start=1, stop=4)
realinflation<-aggregate(realinflation, by=list(realinflation$year), mean)
realinflation$year<-realinflation$Group.1
df<-merge(inflationtimeseries, realinflation, by="year")
df$FrequencyIndex<-rescale(df$Freq)
df$RealinflationIndex<-rescale(df$Value)
df<-df[,c("year", "FrequencyIndex", "RealinflationIndex")]
df<-melt(df, id="year")
#df$year<-as.Date(as.character(df$year), "%Y")
#df$year<-substr(df$year, start=1, stop=4)
#df$year<-year(df$year)
qplot(year, value, data=df, geom="line", colour=variable,
main="Real inflation and UKGWA Mentions of \"inflation\"") + theme_bw()
png("graphs/inflation_responsiveness.png", width = 600, height = 480)
qplot(year, value, data=df, geom="line", colour=variable,
main="Real inflation and UKGWA Mentions of \"inflation\"") + theme_bw()
dev.off()
realinflation<-read.csv('http://www.quandl.com/api/v1/datasets/UKONS/MM23_D7G7_M.csv?&trim_start=1989-01-31&trim_end=2014-01-31&sort_order=desc', colClasses=c('Date'='Date'))
realinflation$year<-year(realinflation$Year)
realinflation$year<-substr(realinflation$year, start=1, stop=4)
realinflation<-aggregate(realinflation, by=list(realinflation$year), mean)
realinflation$year<-realinflation$Group.1
df<-merge(inflationtimeseries, realinflation, by="year")
df$FrequencyIndex<-rescale(df$Freq)
df$RealinflationIndex<-rescale(df$Value)
df<-df[,c("year", "FrequencyIndex", "RealinflationIndex")]
df<-melt(df, id="year")
#df$year<-as.Date(as.character(df$year), "%Y")
#df$year<-substr(df$year, start=1, stop=4)
#df$year<-year(df$year)
png("graphs/inflation_responsiveness.png", width = 600, height = 480)
qplot(year, value, data=df, geom="line", colour=variable,
main="Real inflation and UKGWA Mentions of \"inflation\"") + theme_bw()
dev.off()
realinflation$year<-substr(realinflation$year, start=1, stop=4)
realinflation<-read.csv('http://www.quandl.com/api/v1/datasets/UKONS/MM23_D7G7_M.csv?&trim_start=1989-01-31&trim_end=2014-01-31&sort_order=desc', colClasses=c('Date'='Date'))
realinflation$year<-substr(realinflation$year, start=1, stop=4)
View(realinflation)
realinflation$year<-substr(realinflation$Date, start=1, stop=4)
realinflation<-aggregate(realinflation, by=list(realinflation$year), mean)
realinflation$year<-realinflation$Group.1
df<-merge(inflationtimeseries, realinflation, by="year")
df$FrequencyIndex<-rescale(df$Freq)
df$RealinflationIndex<-rescale(df$Value)
df<-df[,c("year", "FrequencyIndex", "RealinflationIndex")]
df<-melt(df, id="year")
qplot(year, value, data=df, geom="line", colour=variable,
main="Real inflation and UKGWA Mentions of \"inflation\"") + theme_bw()
View(realinflation)
read.csv('http://www.quandl.com/api/v1/datasets/UKONS/LMS_MGSX_M.csv?&trim_start=1971-02-28&trim_end=2013-11-30&sort_order=desc', colClasses=c('Year'='Date'))
realunemployment<-read.csv('http://www.quandl.com/api/v1/datasets/UKONS/LMS_MGSX_M.csv?&trim_start=1971-02-28&trim_end=2013-11-30&sort_order=desc', colClasses=c('Year'='Date'))
realunemployment$year<-year(realunemployment$Year)
realunemployment$year<-substr(realunemployment$year, start=1, stop=4)
realunemployment<-aggregate(realunemployment, by=list(realunemployment$year), mean)
realunemployment$year<-realunemployment$Group.1
df<-merge(Unemploymenttimeseries, realunemployment, by="year")
df$FrequencyIndex<-rescale(df$Freq)
df$RealUnemploymentIndex<-rescale(df$Value)
df<-df[,c("year", "FrequencyIndex", "RealUnemploymentIndex")]
df<-melt(df, id="year")
#df$year<-as.Date(as.character(df$year), "%Y")
#df$year<-substr(df$year, start=1, stop=4)
#df$year<-year(df$year)
### Load required packages
require(XML)
require(lubridate)
require(Quandl)
require(reshape)
require(arm)
### Load lists of results saved from /scrape
load("data/api/api_Unemployment.Rdata")
### Parse the lists of XML docs
Unemploymentdata<-lapply(DF.unemployment, function(x) try(xmlParse(x)))
### Extract the timestamps
Unemploymentdates <- lapply(Unemploymentdata, function(x) try(xpathSApply(x,'//item/nutch:date',xmlValue)))
### Make time-series
Unemploymentdf<-as.data.frame(unlist(Unemploymentdates))
names(Unemploymentdf)<-c("timestamp")
Unemploymentdf$year<-substr(Unemploymentdf$timestamp, start=1, stop=4)
Unemploymenttimeseries<-as.data.frame(table(Unemploymentdf$year))
Unemploymenttimeseries$Year<-as.Date(as.character(Unemploymenttimeseries$Var1), "%Y")
Unemploymenttimeseries$year<-year(Unemploymenttimeseries$Year)
Unemploymenttimeseries$Term<-"Unemployment"
realunemployment<-read.csv('http://www.quandl.com/api/v1/datasets/UKONS/LMS_MGSX_M.csv?&trim_start=1971-02-28&trim_end=2013-11-30&sort_order=desc', colClasses=c('Year'='Date'))
realunemployment$year<-year(realunemployment$Year)
realunemployment$year<-substr(realunemployment$year, start=1, stop=4)
realunemployment<-aggregate(realunemployment, by=list(realunemployment$year), mean)
realunemployment$year<-realunemployment$Group.1
df<-merge(Unemploymenttimeseries, realunemployment, by="year")
df$FrequencyIndex<-rescale(df$Freq)
df$RealUnemploymentIndex<-rescale(df$Value)
df<-df[,c("year", "FrequencyIndex", "RealUnemploymentIndex")]
df<-melt(df, id="year")
#df$year<-as.Date(as.character(df$year), "%Y")
#df$year<-substr(df$year, start=1, stop=4)
#df$year<-year(df$year)
realunemployment$year<-substr(realunemployment$year, start=1, stop=4)
realunemployment<-aggregate(realunemployment, by=list(realunemployment$year), mean)
realunemployment$year<-realunemployment$Group.1
df<-merge(Unemploymenttimeseries, realunemployment, by="year")
df$FrequencyIndex<-rescale(df$Freq)
df$RealUnemploymentIndex<-rescale(df$Value)
df<-df[,c("year", "FrequencyIndex", "RealUnemploymentIndex")]
df<-melt(df, id="year")
#df$year<-as.Date(as.character(df$year), "%Y")
View(realunemployment)
qplot(year, value, data=df, geom="line", colour=variable,
main="Real unemployment and UKGWA Mentions of \"Unemployment\"") + theme_bw()
realunemployment<-read.csv('http://www.quandl.com/api/v1/datasets/UKONS/LMS_MGSX_M.csv?&trim_start=1971-02-28&trim_end=2013-11-30&sort_order=desc', colClasses=c('Year'='Date'))
realunemployment$year<-year(realunemployment$Year)
realunemployment$year<-substr(realunemployment$year, start=1, stop=4)
View(realunemployment)
realunemployment<-read.csv('http://www.quandl.com/api/v1/datasets/UKONS/LMS_MGSX_M.csv?&trim_start=1971-02-28&trim_end=2013-11-30&sort_order=desc', colClasses=c('Year'='Date'))
realunemployment$year<-substr(realunemployment$year, start=1, stop=4)
realunemployment<-aggregate(realunemployment, by=list(realunemployment$year), mean)
realunemployment<-read.csv('http://www.quandl.com/api/v1/datasets/UKONS/LMS_MGSX_M.csv?&trim_start=1971-02-28&trim_end=2013-11-30&sort_order=desc', colClasses=c('Year'='Date'))
realunemployment$year<-year(realunemployment$Year)
realunemployment<-read.csv('http://www.quandl.com/api/v1/datasets/UKONS/LMS_MGSX_M.csv?&trim_start=1971-02-28&trim_end=2013-11-30&sort_order=desc', colClasses=c('Year'='Date'))
realunemployment$year<-year(realunemployment$Year)
realunemployment$Year<-substr(realunemployment$year, start=1, stop=4)
realunemployment<-aggregate(realunemployment, by=list(realunemployment$Year), mean)
realunemployment$year<-realunemployment$Group.1
df<-merge(Unemploymenttimeseries, realunemployment, by="year")
df$FrequencyIndex<-rescale(df$Freq)
df$RealUnemploymentIndex<-rescale(df$Value)
df<-df[,c("year", "FrequencyIndex", "RealUnemploymentIndex")]
df<-melt(df, id="year")
qplot(year, value, data=df, geom="line", colour=variable,
main="Real unemployment and UKGWA Mentions of \"Unemployment\"") + theme_bw()
png("graphs/unemployment_responsiveness.png", width = 600, height = 480)
qplot(year, value, data=df, geom="line", colour=variable,
main="Real unemployment and UKGWA Mentions of \"Unemployment\"") + theme_bw()
dev.off()
qplot(year, value, data=df, geom="line", colour=variable,
main="Real inflation and UKGWA Mentions of \"inflation\"") + theme_bw()
### Load required packages
require(XML)
require(lubridate)
require(Quandl)
require(reshape)
require(arm)
### Load lists of results saved from /scrape
load("data/api/api_inflation.Rdata")
### Parse the lists of XML docs
inflationdata<-lapply(DF.inflation, function(x) try(xmlParse(x)))
### Extract the timestamps
inflationdates <- lapply(inflationdata, function(x) try(xpathSApply(x,'//item/nutch:date',xmlValue)))
### Make time-series
inflationdf<-as.data.frame(unlist(inflationdates))
names(inflationdf)<-c("timestamp")
inflationdf$year<-substr(inflationdf$timestamp, start=1, stop=4)
inflationtimeseries<-as.data.frame(table(inflationdf$year))
inflationtimeseries$Year<-as.Date(as.character(inflationtimeseries$Var1), "%Y")
inflationtimeseries$year<-year(inflationtimeseries$Year)
inflationtimeseries$Term<-"inflation"
realinflation<-read.csv('http://www.quandl.com/api/v1/datasets/UKONS/MM23_D7G7_M.csv?&trim_start=1989-01-31&trim_end=2014-01-31&sort_order=desc', colClasses=c('Date'='Date'))
realinflation$year<-substr(realinflation$Date, start=1, stop=4)
realinflation<-aggregate(realinflation, by=list(realinflation$year), mean)
realinflation$year<-realinflation$Group.1
df<-merge(inflationtimeseries, realinflation, by="year")
df$FrequencyIndex<-rescale(df$Freq)
df$RealinflationIndex<-rescale(df$Value)
df<-df[,c("year", "FrequencyIndex", "RealinflationIndex")]
df<-melt(df, id="year")
#df$year<-as.Date(as.character(df$year), "%Y")
#df$year<-substr(df$year, start=1, stop=4)
#df$year<-year(df$year)
qplot(year, value, data=df, geom="line", colour=variable,
main="Real inflation and UKGWA Mentions of \"inflation\"") + theme_bw()
png("graphs/inflation_responsiveness.png", width = 600, height = 480)
qplot(year, value, data=df, geom="line", colour=variable,
main="Real inflation and UKGWA Mentions of \"inflation\"") + theme_bw()
dev.off()
